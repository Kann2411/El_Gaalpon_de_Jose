exports.id=763,exports.ids=[763],exports.modules={3195:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,3642,23)),Promise.resolve().then(s.t.bind(s,7586,23)),Promise.resolve().then(s.t.bind(s,7838,23)),Promise.resolve().then(s.t.bind(s,8057,23)),Promise.resolve().then(s.t.bind(s,7741,23)),Promise.resolve().then(s.t.bind(s,3118,23))},715:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,5889,23)),Promise.resolve().then(s.bind(s,340)),Promise.resolve().then(s.bind(s,315)),Promise.resolve().then(s.bind(s,4287))},340:(e,t,s)=>{"use strict";s.d(t,{Providers:()=>l});var r=s(7247),a=s(9898),o=s(4946);function l({children:e}){return r.jsx(a.SessionProvider,{children:r.jsx(o.d,{children:e})})}},315:(e,t,s)=>{"use strict";s.d(t,{default:()=>m});var r=s(7247),a=s(8964),o=s(4597),l=s(9906),n=s(4287),i=s(4178),c=s(4946);let d=({isOpen:e,onClose:t,onAccept:s,children:a})=>e?r.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 bg-black bg-opacity-75",children:(0,r.jsxs)("div",{className:"bg-neutral-900 rounded-lg p-6 max-w-md w-full",children:[r.jsx("h2",{className:"text-white text-lg font-mediummb-4 text-center mb-7",children:a}),(0,r.jsxs)("div",{className:"flex justify-center",children:[r.jsx("button",{onClick:s,className:"bg-red-600 hover:bg-red-500 text-white font-semibold py-2 px-4 rounded me-5",children:"Accept"}),r.jsx("button",{onClick:t,className:"bg-white text-black font-semibold py-2 px-4 rounded hover:bg-gray-200 ms-5",children:"Cancel"})]})]})}):null;var u=s(31);let m=()=>{let{user:e,logOut:t,isLogged:s,imgUrl:m,setImgUrl:x}=(0,a.useContext)(c.S),[h,g]=(0,a.useState)(!1),p=(0,a.useRef)(null),f=(0,i.usePathname)(),b=(0,i.useRouter)(),[A,w]=(0,a.useState)(null),[j,y]=(0,a.useState)(!1),v=async()=>{if(!A||!e)return;let t=new FormData;t.append("file",A),y(!1),w(null);try{let s=await fetch(`http://localhost:3000/files/profileImages/${e.id}`,{method:"POST",body:t});if(s.ok){let t=await s.json();x(()=>t.imgUrl);let r=e.id;localStorage.setItem(`imgUrl_${r}`,t.imgUrl),u.Z.fire({title:"Super!",text:"Profile photo updated successfully!",icon:"success",customClass:{popup:"bg-black text-white",title:"text-red-600",confirmButton:"bg-red-600 text-white hover:bg-red-700 py-2 px-4 border-none rounded-md"},buttonsStyling:!1}),g(!1)}else{let e=await s.json();console.error("Error details:",e),u.Z.fire({title:"Mmm...",text:`Failed to upload profile photo: ${e.message||"Unknown error"}`,icon:"error",customClass:{popup:"bg-black text-white",title:"text-red-600",confirmButton:"bg-red-600 text-white hover:bg-red-700 py-2 px-4 border-none"},buttonsStyling:!1})}}catch(e){console.error("Error uploading file:",e),u.Z.fire({title:"Mmm...",text:"Error when uploading the file.",icon:"error",customClass:{popup:"bg-black text-white",title:"text-red-600",confirmButton:"bg-red-600 text-white hover:bg-red-700 py-2 px-4 border-none"},buttonsStyling:!1})}};return(0,a.useEffect)(()=>{s&&b.push("/home")},[s,b]),(0,a.useEffect)(()=>{let e=e=>{p.current&&!p.current.contains(e.target)&&g(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,r.jsxs)("header",{className:"flex items-center justify-between p-4 bg-black text-white shadow-md",children:[(0,r.jsxs)(l.default,{href:"/",className:"flex items-center",children:[r.jsx(o.default,{src:n.default,alt:"logo",width:60,height:60}),r.jsx("div",{className:"ml-4 text-2xl font-bold",children:"FitZone"})]}),e?.role==="user"?r.jsx("nav",{className:"flex-1 flex items-center justify-center",children:r.jsx("ul",{className:"flex space-x-6 list-none m-0 p-0 items-center justify-center flex-grow",children:["Classes","Plans","Appointments","Training Plans"].map((e,t)=>{let s=e.toLowerCase(),a="classes"===s?"/home":"plans"===s?"/plans":"appointments"===s?"/appointments":"/training-plans";return(0,r.jsxs)("li",{className:"relative group",children:[r.jsx(l.default,{href:a,className:"text-white text-sm sm:text-base font-medium px-3 py-2",children:e}),r.jsx("span",{className:`absolute bottom-0 left-0 w-full h-0.5 bg-red-600 transition-transform duration-300 ${f===a?"scale-x-100":"scale-x-0"}`}),r.jsx("span",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-red-600 transition-transform duration-300 scale-x-0 group-hover:scale-x-100"})]},t)})})}):e?.role==="admin"?r.jsx("nav",{className:"flex-1 flex items-center justify-center",children:r.jsx("ul",{className:"flex space-x-6 list-none m-0 p-0 items-center justify-center flex-grow",children:["Users","Coaches","Admins","Classes"].map((e,t)=>{let s=e.toLowerCase(),a="users"===s?"/users":"coaches"===s?"/coaches":"admins"===s?"/admins":"/classes";return(0,r.jsxs)("li",{className:"relative group",children:[r.jsx(l.default,{href:a,className:"text-white text-sm sm:text-base font-medium px-3 py-2",children:e}),r.jsx("span",{className:`absolute bottom-0 left-0 w-full h-0.5 bg-red-600 transition-transform duration-300 ${f===a?"scale-x-100":"scale-x-0"}`}),r.jsx("span",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-red-600 transition-transform duration-300 scale-x-0 group-hover:scale-x-100"})]},t)})})}):e?.role==="coach"?r.jsx("nav",{className:"flex-1 flex items-center justify-center",children:r.jsx("ul",{className:"flex space-x-6 list-none m-0 p-0 items-center justify-center flex-grow",children:["Training Management"].map((e,t)=>{let s="training management"===e.toLowerCase()?"/training-management":"#";return(0,r.jsxs)("li",{className:"relative group",children:[r.jsx(l.default,{href:s,className:"text-white text-sm sm:text-base font-medium px-3 py-2",children:e}),r.jsx("span",{className:`absolute bottom-0 left-0 w-full h-0.5 bg-red-600 transition-transform duration-300 ${f===s?"scale-x-100":"scale-x-0"}`}),r.jsx("span",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-red-600 transition-transform duration-300 scale-x-0 group-hover:scale-x-100"})]},t)})})}):s?null:r.jsx("nav",{className:"flex-1 flex items-center justify-center",children:r.jsx("ul",{className:"flex space-x-6 list-none m-0 p-0 items-center justify-center flex-grow",children:["Classes","Plans"].map((e,t)=>{let s="classes"===e.toLowerCase()?"/home":"/plans";return(0,r.jsxs)("li",{className:"relative group",children:[r.jsx(l.default,{href:s,className:"text-white text-sm sm:text-base font-medium px-3 py-2",children:e}),r.jsx("span",{className:`absolute bottom-0 left-0 w-full h-0.5 bg-red-600 transition-transform duration-300 ${f===s?"scale-x-100":"scale-x-0"}`}),r.jsx("span",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-red-600 transition-transform duration-300 scale-x-0 group-hover:scale-x-100"})]},t)})})}),s?(0,r.jsxs)("div",{className:"relative",ref:p,children:[r.jsx("div",{className:"w-14 h-14 rounded-full cursor-pointer transition-transform duration-200 hover:scale-105 me-5",onClick:()=>{g(e=>!e)},children:r.jsx("img",{src:m||"https://i.postimg.cc/Ssxqc09d/Dise-o-sin-t-tulo-17-removebg-preview.png",alt:"avatar",className:"w-full h-full rounded-full"})}),r.jsx("div",{className:`absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg transition-all duration-600 ease-in-out ${h?"opacity-100 scale-100":"opacity-0 scale-95 pointer-events-none"}`,children:h&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"px-4 py-2 text-black",children:[r.jsx("p",{className:"font-medium",children:e?.name}),r.jsx("p",{className:"font-light",children:e?.email})]}),r.jsx("button",{onClick:()=>{t(),g(!1),b.push("/")},className:"w-full px-4 py-2 text-left text-red-600 hover:bg-red-100",children:"Log Out"}),r.jsx("button",{onClick:()=>document.getElementById("fileInput")?.click(),className:"w-full px-4 py-2 text-left text-black hover:bg-red-100",children:"Change profile photo"}),r.jsx("input",{type:"file",id:"fileInput",style:{display:"none"},accept:"image/*",onChange:e=>{e.target.files&&e.target.files.length>0&&(w(e.target.files[0]),y(!0))}})]})})]}):(0,r.jsxs)("div",{className:"flex space-x-4",children:[r.jsx(l.default,{href:"/login",className:"text-white text-sm sm:text-base font-medium px-3 py-2",children:"Sign In"}),r.jsx(l.default,{href:"/register",className:"text-lg font-medium px-4 py-2 rounded-md bg-red-600 text-white shadow-md hover:bg-red-800 transition-colors",children:"Sign Up"})]}),r.jsx(d,{isOpen:j,onClose:()=>{y(!1),w(null)},onAccept:v,children:"Are you sure you want to change your photo?"})]})}},4946:(e,t,s)=>{"use strict";s.d(t,{S:()=>d,d:()=>u});var r=s(7247),a=s(8024),o=s(8964),l=s(1688),n=s(31),i=s(4178),c=s(9898);let d=(0,o.createContext)({user:null,setUser:()=>{},isLogged:!1,setIsLogged:()=>{},signIn:async()=>!1,signUp:async e=>({success:!1,errorMessage:""}),logOut:()=>{},imgUrl:null,setImgUrl:()=>{}}),u=({children:e})=>{let[t,s]=(0,o.useState)(null),[u,m]=(0,o.useState)(!1),[x,h]=(0,o.useState)(null);(0,i.useRouter)();let{data:g,status:p}=(0,c.useSession)();console.log("\uD83D\uDE80 ~ UserProvider ~ status:",p),console.log("\uD83D\uDE80 ~ UserProvider ~ session:",g);let f=async e=>{try{let t;if("provider"in e)return!0;{let s=await (0,a.Qd)(e);t=s?{user:s.user,token:s.token}:null}if(t&&t.token){let e=(0,l.o)(t.token),r=e.roles,o=e.id,n={...t.user,role:r,id:o,token:t.token},i=await (0,a.FQ)(o,t.token);return i&&(s({...n,...i}),h(i.imgUrl||null),localStorage.setItem(`imgUrl_${o}`,i.imgUrl||"")),localStorage.setItem("user",JSON.stringify(n)),localStorage.setItem("token",t.token),m(!0),!0}return console.warn("No se pudo iniciar sesi\xf3n, datos no v\xe1lidos:",t),!1}catch(e){return e instanceof Error?console.error("Error durante el login:",e.message):console.error("Error inesperado durante el login:",e),!1}},b=async e=>{try{console.log("Llamando a postSignUp con:",e);let t=await (0,a.J)(e);if(console.log("Respuesta recibida en signUp:",t),t&&t.user&&t.user.id)return console.log("Usuario registrado correctamente:",t.user),await f({email:e.email,password:e.password}),h(t.user.imgUrl),{success:!0};return console.log("La respuesta no contiene el usuario o el ID:",t),{success:!1,errorMessage:"No se pudo obtener el ID del usuario."}}catch(e){return console.error("Error en signUp:",e),{success:!1,errorMessage:e instanceof Error?e.message:"Error desconocido en el registro"}}},A=async()=>{let e=t?.id;e&&localStorage.removeItem(`imgUrl_${e}`),localStorage.removeItem("user"),localStorage.removeItem("token"),n.Z.fire({title:"Come back soon!",text:"You are logged out!",icon:"success",confirmButtonText:"Great",customClass:{popup:"bg-black text-white",title:"text-red-600",confirmButton:"bg-red-600 text-white hover:bg-red-700 py-2 px-4 border-none rounded-md"},buttonsStyling:!1}),s(null),m(!1),h(null)};return(0,o.useEffect)(()=>{let e=localStorage.getItem("user"),t=localStorage.getItem("token");if(e&&t){let r=JSON.parse(e);try{let e=(0,l.o)(t),a=e.roles,o=r.id,n=localStorage.getItem(`imgUrl_${o}`);s({...r,role:a,id:e.id}),h(n||null),m(!0)}catch(e){console.warn("Error al decodificar el token:",e)}}},[]),r.jsx(d.Provider,{value:{user:t,setUser:s,isLogged:u,setIsLogged:m,signIn:f,signUp:b,logOut:A,imgUrl:x,setImgUrl:h},children:e})}},8024:(e,t,s)=>{"use strict";async function r(e){try{if(!e.email||!e.password)return console.error("Email y contrase\xf1a son obligatorios"),null;let t=await fetch("http://localhost:3000/auth/signin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){let e=await t.json();throw console.error("Error del servidor:",e),Error(`Error: ${t.status} ${t.statusText}`)}return await t.json()}catch(e){return e instanceof Error?console.error("Error durante la solicitud de inicio de sesi\xf3n:",e.message):console.error("Error inesperado:",e),null}}async function a(e){try{console.log("Iniciando la solicitud de registro al backend");let t=await fetch("http://localhost:3000/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){let e=await t.json();throw console.error("Error del servidor:",e),Error(`Error: ${t.status} ${t.statusText}`)}let s=await t.json();return console.log("Respuesta del servidor:",s),s}catch(e){return console.error("Error durante el registro:",e),null}}s.d(t,{FQ:()=>n,J:()=>a,Qd:()=>r,Rf:()=>o,wc:()=>l});let o=async()=>{let e=localStorage.getItem("token"),t=await fetch("http://localhost:3000/users",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}});if(!t.ok){let e=await t.json();throw Error(`HTTP error! Status: ${t.status}, Message: ${e.message}`)}return await t.json()},l=async(e,t)=>{let s=localStorage.getItem("token");if(!s)throw Error("Token no encontrado");let r=await fetch(`http://localhost:3000/users/changeRole/${e}?role=${t}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`}});if(!r.ok)throw Error((await r.json()).message||"Error desconocido al cambiar el rol");return await r.json()},n=async(e,t)=>{try{let s=await fetch(`http://localhost:3000/users/${e}`,{headers:{Authorization:`Bearer ${t}`}});if(s.ok)return await s.json();return console.error("Error fetching user data:",s.statusText),null}catch(e){return console.error("Error fetching user data:",e),null}}},37:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>g,metadata:()=>h});var r=s(2051),a=s(2017),o=s.n(a),l=s(9005),n=s.n(l);s(5023);var i=s(5347);let c=(0,i.createProxy)(String.raw`C:\Users\nieva\OneDrive\Desktop\Proyecto-Gym\El_Gaalpon_de_Jose\Frontend\src\components\NavBar\index.tsx#default`);var d=s(9624);let u={src:"/_next/static/media/icono-principal.1616a8ee.png",height:500,width:500,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAIVBMVEX5AADxBwbxBgTxBgX3AgL2AwPzAAD4AwPyAAD6AQLwCAi6xnEHAAAAC3RSTlMBPSxQm3AOshSIWwYSdCIAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAxSURBVHicZYoxDgAgCMS4OxDw/w82mDjZoelQsw85tekyuIciYcgOTBTZLKzZ1vXjABNtAJRbZPm1AAAAAElFTkSuQmCC",blurWidth:8,blurHeight:8},m=()=>r.jsx("footer",{className:"bg-black",children:(0,r.jsxs)("div",{className:"mx-auto w-full max-w-screen-xl p-4 py-6 lg:py-8",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(d.default,{src:u,alt:"logo",width:60,height:60}),r.jsx("div",{className:"ml-4 text-2xl font-bold text-white",children:"FitZone"})]}),(0,r.jsxs)("div",{className:"flex space-x-8",children:[r.jsx("a",{href:"/home",className:"text-sm font-semibold text-gray-900 uppercase dark:text-white",children:"Home"}),r.jsx("a",{href:"/plans",className:"text-sm font-semibold text-gray-900 uppercase dark:text-white",children:"Plans"}),r.jsx("a",{href:"#",className:"text-sm font-semibold text-gray-900 uppercase dark:text-white",children:"Contact Us"})]})]}),r.jsx("hr",{className:"my-6 border-gray-200 sm:mx-auto dark:border-gray-700 lg:my-8"}),(0,r.jsxs)("div",{className:"sm:flex sm:items-center sm:justify-between",children:[(0,r.jsxs)("span",{className:"text-sm text-gray-500 sm:text-center dark:text-gray-400",children:["\xa9 2024 ",r.jsx("a",{href:"/",className:"hover:underline",children:"FitZoneâ„¢"}),". All Rights Reserved."]}),r.jsx("div",{className:"flex mt-4 sm:justify-center sm:mt-0",children:r.jsx("a",{href:"#",className:"text-gray-500 hover:text-gray-900 dark:hover:text-white"})})]})]})}),x=(0,i.createProxy)(String.raw`C:\Users\nieva\OneDrive\Desktop\Proyecto-Gym\El_Gaalpon_de_Jose\Frontend\src\app\Providers.tsx#Providers`),h={title:"FitZone",description:"Your fitness journey starts here"};function g({children:e}){return r.jsx("html",{lang:"en",children:r.jsx("body",{className:`${o().variable} ${n().variable} antialiased`,children:(0,r.jsxs)(x,{children:[r.jsx(c,{}),e,r.jsx(m,{})]})})})}},4287:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r={src:"/_next/static/media/icono-principal.1616a8ee.png",height:500,width:500,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAIVBMVEX5AADxBwbxBgTxBgX3AgL2AwPzAAD4AwPyAAD6AQLwCAi6xnEHAAAAC3RSTlMBPSxQm3AOshSIWwYSdCIAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAxSURBVHicZYoxDgAgCMS4OxDw/w82mDjZoelQsw85tekyuIciYcgOTBTZLKzZ1vXjABNtAJRbZPm1AAAAAElFTkSuQmCC",blurWidth:8,blurHeight:8}},5023:()=>{}};